<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Jcf（java集合框架）概括</title>
    <meta name="description" content="在Java中，集合也就是可以装载多个Java对象的某种对象，所以Java的集合只能装载对象，在装载基础数据类型的时候，事实上装载的是基础类型锁对应的包装类。在学习JCF之前，我们先回顾一下，在计算机编程中我们期望集合能有哪些能力？  可以遍历集合全部的元素  关于集合类部元素的顺序          保留写入集合...">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="http://leocook.github.io/2017/06/05/JCF-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-%E6%A6%82%E6%8B%AC/">
    <link rel="alternate" type="application/rss+xml" title="leocook" href="http://leocook.github.io /feed.xml ">


    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f1ad6f37c7565a0fbaf172ac83132650";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


<script type='text/javascript'>
      var _vds = _vds || [];
      window._vds = _vds;
      (function(){
        _vds.push(['setAccountId', 'b628e9072406c903']);
        (function() {
          var vds = document.createElement('script');
          vds.type='text/javascript';
          vds.async = true;
          vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(vds, s);
        })();
      })();
  </script>
</head>


  <body>

    <header>
    <div class="wrapper">
        <a href="/" class="brand">leocook</a>
        <small>Big-Data Dev Engineer</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
    <script type='text/javascript'>
      var _vds = _vds || [];
      window._vds = _vds;
      (function(){
        _vds.push(['setAccountId', 'b628e9072406c903']);
        (function() {
          var vds = document.createElement('script');
          vds.type='text/javascript';
          vds.async = true;
          vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(vds, s);
        })();
      })();
  </script>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>Jcf（java集合框架）概括</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2017-06-05
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#java" title="Category: java" rel="category">java</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#java" title="Tag: java" rel="tag">java</a-->
        <a href="/tag/#java" title="Tag: java" rel="tag">java</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">1.概述</a></li>
  <li><a href="#iterator" id="markdown-toc-iterator">2.Iterator接口</a></li>
  <li><a href="#collection" id="markdown-toc-collection">3.Collection</a>    <ul>
      <li><a href="#list" id="markdown-toc-list">3.1.List</a></li>
      <li><a href="#set" id="markdown-toc-set">3.2.Set</a></li>
      <li><a href="#queue" id="markdown-toc-queue">3.3.Queue</a></li>
    </ul>
  </li>
  <li><a href="#map" id="markdown-toc-map">4.Map</a>    <ul>
      <li><a href="#hashmap" id="markdown-toc-hashmap">4.1.HashMap</a></li>
      <li><a href="#linkedhashmap" id="markdown-toc-linkedhashmap">4.2.LinkedHashMap</a></li>
      <li><a href="#treemap" id="markdown-toc-treemap">4.3.TreeMap</a></li>
    </ul>
  </li>
  <li><a href="#section-1" id="markdown-toc-section-1">5.其它集合</a>    <ul>
      <li><a href="#vector" id="markdown-toc-vector">5.1.Vector</a></li>
      <li><a href="#stack" id="markdown-toc-stack">5.2.Stack</a></li>
      <li><a href="#hashtable" id="markdown-toc-hashtable">5.3.HashTable</a></li>
    </ul>
  </li>
  <li><a href="#section-2" id="markdown-toc-section-2">6.总结</a></li>
</ul>

<p>在Java中，集合也就是可以装载多个<strong>Java对象</strong>的某种对象，所以Java的集合只能装载对象，在装载基础数据类型的时候，事实上装载的是基础类型锁对应的包装类。</p>

<p>在学习JCF之前，我们先回顾一下，在计算机编程中我们期望<strong>集合能有哪些能力？</strong></p>

<ul>
  <li>可以遍历集合全部的元素</li>
  <li>关于集合类部元素的顺序
    <ul>
      <li>保留写入集合的顺序</li>
      <li>可根据元素的大小自动排序</li>
    </ul>
  </li>
  <li>能快速查找出集合中的某个元素</li>
  <li>可以根据位置来快速的修改元素</li>
  <li>能高效的增加、删除集合中元素</li>
  <li>集合内的元素可以快速去重</li>
</ul>

<p>聊到集合，那肯定少不了下面几种基础的数据结构：</p>

<ul>
  <li>线性存储
    <ul>
      <li>（可变）数组</li>
      <li>链表</li>
    </ul>
  </li>
  <li>Hash散列表</li>
  <li>平衡树</li>
</ul>

<h2 id="section">1.概述</h2>

<p>在Java2.0之前，只有一些简单的集合，例如Vector/Stack/Hashtable，由于这些集合直接使用synchronized关键字来实现线程安全，使得这些集合在使用的时候效率极低。从Java2.0开始之后，Java提供了一系列的Java Collections Framework（JCF）。</p>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/JCF.gif" alt="JCF" /></p>

<p>下面开始讲讲Java的集合框架（后面简称JCF）。JCF主要包括了两种类型的集合：<strong>Collection</strong>和<strong>Map</strong>。
Collection集合中的每个节点存放的是一个元素。Map集合中的每个元素存放的是&lt;key,value&gt;型的键值对。</p>

<h2 id="iterator">2.Iterator接口</h2>

<p>这是迭代器接口，不同集合的Iterator实现会不一样。例如ArrayList的Iterator实现是内部类Itr。
集合实现了Iterator之后，就可以使用迭代器顺序遍历了。
Iterator接口的定义如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Object next()：返回迭代器刚越过的元素的引用，返回值是Object，需要强制转换成自己需要的类型

boolean hasNext()：判断容器内是否还有可供访问的元素

void remove()：删除迭代器刚越过的元素
</code></pre>
</div>

<p>查看源码的话，会看到下面这一段代码：</p>

<div class="highlighter-rouge"><pre class="highlight"><code> ......
 * @see Collection
 * @see ListIterator
 * @see Iterable
 public interface Iterator&lt;E&gt; {
 ......
</code></pre>
</div>

<ul>
  <li>Iterable</li>
</ul>

<p>所有实现了Iterable接口的集合，都可以使用增强的for循环，因为这个集合将会实现一个自己的Iterator。</p>

<ul>
  <li>ListIterator</li>
</ul>

<p>ListIterator是针对List实现的迭代器。由于List是顺序存储结构，所以除了next()、hasNext()、remove()方法，ListIterator还提供了List下标处理的相关方法，例如获取上/下一个元素以及它们的下标情况。</p>

<h2 id="collection">3.Collection</h2>

<p>Collection是Java集合层次结构中的根节点，实现Collection的集合中，有的是允许存放重复的元素，有的不允许有重复的元素（set），有的集合是有序的，有的则是无序的。Collection下面有三种子接口，分别是List、Set、Queue，下面逐一介绍。</p>

<h3 id="list">3.1.List</h3>

<p>实现List接口的集合有着两大特性：允许元素重复、元素是有序的。实现了List接口的集合，可以通过位置来操作集合的元素。下图展示了List接口中的全部方法：</p>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/list.png" alt="List" /></p>

<p>下面是几个常用的List类型集合。</p>

<ul>
  <li>ArrayList</li>
</ul>

<p>基于数组实现的线性存储集合。数组的大小可以变化，当元素个数超过了数组的大小，将会重新创建一个更大长度的数组，并把当前数组中的内容复制进去，每次长度增长为原来的1.5倍左右，可以查看源码：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);
    if (newCapacity - minCapacity &lt; 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    // minCapacity is usually close to size, so this is a win:
    elementData = Arrays.copyOf(elementData, newCapacity);
}
</code></pre>
</div>

<ul>
  <li>LinkedList</li>
</ul>

<p>基于链表实现的线性存储集合。下面对比ArrayList和LinkedList：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">操作</th>
      <th style="text-align: left">ArrayList</th>
      <th style="text-align: left">LinkedList</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">内部数据结构</td>
      <td style="text-align: left">数组</td>
      <td style="text-align: left">链表</td>
    </tr>
    <tr>
      <td style="text-align: center">是否顺序结构</td>
      <td style="text-align: left">是</td>
      <td style="text-align: left">是</td>
    </tr>
    <tr>
      <td style="text-align: center">位置检索</td>
      <td style="text-align: left">快</td>
      <td style="text-align: left">慢</td>
    </tr>
    <tr>
      <td style="text-align: center">增、删</td>
      <td style="text-align: left">慢</td>
      <td style="text-align: left">快</td>
    </tr>
  </tbody>
</table>

<h3 id="set">3.2.Set</h3>

<p>实现Set接口的集合内部元素不重复，Set有三个具体的实现类：HashSet（散列集）、LinkedHashSet（顺序集）、TreeSet（平衡树）。</p>

<ul>
  <li>HashSet</li>
</ul>

<p>基于hash的无序set。其实HashSet内部是用HashMap实现的，HashMap后边会说到。在散列集中，有两个名词需要关注，初始容量和客座率。客座率是确定在增加规则集之前，该规则集的饱满程度，当元素个数超过了容量与客座率的乘积时，容量就会自动翻倍。</p>

<ul>
  <li>LinkedHashSet</li>
</ul>

<p>基于链表实现的HashSet，LinkedHashSet中的元素是有序的，且顺序和写入的顺序一致。</p>

<ul>
  <li>TreeSet</li>
</ul>

<p>TreeSet是一个有序的Set，排序的比较器可以通过传入Comparator来自定义。</p>

<h3 id="queue">3.3.Queue</h3>

<p>队列是一种FIFO（First in first out）数据结构，元素在Queue的末尾添加，在头部删除。
<img src="http://7xriy2.com1.z0.glb.clouddn.com/Queue.png" alt="Queue" />
Queue接口分别定义了上面6个方法，分别有插入、移除和检查的功能，有的方法在某些特殊情况下回报错，有的则不会，具体见下表：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operation</th>
      <th style="text-align: left">抛出异常</th>
      <th style="text-align: left">返回特殊值</th>
      <th style="text-align: left">操作失败的条件</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Insert（插入）</td>
      <td style="text-align: left">add(e)</td>
      <td style="text-align: left">offer(e),return false</td>
      <td style="text-align: left">当队列空间有限制，且没有多余的空间时</td>
    </tr>
    <tr>
      <td style="text-align: center">Remove（移除）</td>
      <td style="text-align: left">remove()</td>
      <td style="text-align: left">poll(),return null</td>
      <td style="text-align: left">队列为空</td>
    </tr>
    <tr>
      <td style="text-align: center">Examine（检查）</td>
      <td style="text-align: left">element()</td>
      <td style="text-align: left">peek(),return null</td>
      <td style="text-align: left">队列为空</td>
    </tr>
  </tbody>
</table>

<p>Queue平时用的不是很多，优先队列PriorityQueue有的时候会用到。</p>

<h2 id="map">4.Map</h2>

<p>Map是存储键值对映射（key,value）的容器类，可以存储任意类型的对象。但是key不能重复，且一个key只能对应一个值。如果使用对象作为key,那么必须要考虑一下该对象类的hashCode方法和equals方法是否需要重写，因为map是用着两个方法来判断key是否相等的，其中hashCode是用来加速判断的，如果hashCode相等，还会用equals方法来判断。</p>

<p>常用到的Map接口实现类，有三个：HashMap、LinkedHashMap、TreeMap。Map接口定义的方法列表可见下图：
<img src="http://7xriy2.com1.z0.glb.clouddn.com/map.png" alt="Map" /></p>

<h3 id="hashmap">4.1.HashMap</h3>

<p>HashMap是基于数组+链表实现的Hash散列Map结构，数组里存放着索引，链表里存放的是元素数据。(key,value)键值对中，key的hash值就是数组的下标。</p>

<p>在Jdk1.8中，对HashMap做了优化，当链表的长度超过8时，链表结构将会变为了平衡树，这样做主要是为了在HashMap里的元素较多时，能够加快查找的速度。</p>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/map%20struct.png" alt="map结构" /></p>

<p>关于HashMap，其实有很多可以细聊的，它与很多集合都有着关系。后边会再来一篇，详细说一下Java中HashMap的设计，以及Java中散列存储的设计思想。</p>

<h3 id="linkedhashmap">4.2.LinkedHashMap</h3>

<p>LinkedHashMap类继承了HashMap类，HashMap中的元素是没有顺序的，但是LinkedHashMap中的元素是有顺序的。
LinkedHashMap里的元素顺序有两种排序方式：第一种是根据元素key被插入的顺序;第二种是根据元素被访问的顺序来排序（最近最少被访问的元素优先）。</p>

<h3 id="treemap">4.3.TreeMap</h3>

<p>TreeMap是基于红黑树结构来实现的，可以使用Comparable或Comparator接口来实现排序的比较算法。</p>

<blockquote>
  <p>在日常开发中，如果不用考虑键值对元素的顺序，就使用HashMap；如果需要考虑元素插入顺序，就使用LinkedHashMap；如果需要根据Key自定义排序规则，那么就使用TreeMap。</p>
</blockquote>

<h2 id="section-1">5.其它集合</h2>

<p>下面简单说几个不是很常用的集合。</p>

<h3 id="vector">5.1.Vector</h3>

<p>Vector的使用和ArrayList的使用基本一样，它是线程安全的线程安全，但是Vector的线程安全是使用关键字synchronized修饰实现的，所以Vector的效率很低。相对来说，ArrayList更加高效！</p>

<h3 id="stack">5.2.Stack</h3>

<p>Stack是Java2之前设计的栈结构，内部是使用数组实现的。我们知道栈结构的操作中会频繁的出现入栈和出栈，那么使用数组结构的话，在栈结构变长时，自然会带来性能上的折扣。
LinkedList也具备栈的功能，而且是基于链表实现的，所以在开发需要用到栈结构时，推荐使用LinkedList。</p>

<h3 id="hashtable">5.3.HashTable</h3>

<p>HashTable的功能和HashMap相似，它是Dictionary类的，并且使用了synchronized关键字实现了线程安全，所以性能会很差！
除此之外，HashTable的Key不能为空指针null,但是HashMap的key可以为null。</p>

<p>关于集合的线程安全，后边会另写一篇详细说明。</p>

<p>参考地址：
http://www.open-open.com/lib/view/open1474167415464.html
http://www.cnblogs.com/CarpenterLee/p/5414253.html</p>

<h2 id="section-2">6.总结</h2>

<ul>
  <li>JCF接口架构</li>
</ul>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/JCF.gif" alt="JCF接口架构" /></p>

<ul>
  <li>常用的集合分类情况</li>
</ul>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/jcf%E4%BD%BF%E7%94%A8.png" alt="常用的集合分类情况" /></p>

<ul>
  <li>接口功能实现</li>
</ul>

<p>下面表格描述的比较好，每个接口对应不同数据结构的实现。</p>

<p><img src="http://7xriy2.com1.z0.glb.clouddn.com/jcf%20imp.png" alt="JCF 接口实现" /></p>

<p>参考文档：
http://docs.oracle.com/javase/6/docs/technotes/guides/collections/overview.html
http://www.jianshu.com/p/63e76826e852</p>

        </article>

        
        <hr>
        
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
        


        <h2 id="comments">订阅号</h2>
        <img src="http://7xriy2.com1.z0.glb.clouddn.com/leocook.jpg" /><br />


        <h2 id="comments">Comments</h2>
        


<div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function() {
        this.page.url = 'http://leocook.github.io/2017/06/05/JCF-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-%E6%A6%82%E6%8B%AC/'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://leocook.github.io/2017/06/05/JCF-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-%E6%A6%82%E6%8B%AC/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');

        s.src = '//leocook.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/scroll.min.js " charset="utf-8"></script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


  <div class="wrapper">
      <p class="description">
          
          小鸟的成长记录.
          
      </p>
        <p class="contact">
            Contact me at:
            
            <a href="https://github.com/leocook"><i class="fa fa-github" aria-hidden="true"></i></a>
            

            
            <a href="mailto:leocook@163.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>
            

            
            <a href="http://weibo.com/wulinjq"><i class="fa fa-weibo" aria-hidden="true"></i></a>
            

            

            

            
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>

  </div>
</footer>
<script src="/js/main.js " charset="utf-8"></script>


  </body>

</html>
